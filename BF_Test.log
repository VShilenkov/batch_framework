
d:\Projects\batch_framework>CALL BF_Bootstrap.bat 

d:\Projects\batch_framework>REM -> BF.BootStrap 

d:\Projects\batch_framework>IF [] EQU [/INTERNAL_START] (GOTO :BF.BootStrap.Main )  ELSE (GOTO :BF.BootStrap.Prepare ) 

d:\Projects\batch_framework>REM -> BF.BootStrap.Prepare 

d:\Projects\batch_framework>SETLOCAL

d:\Projects\batch_framework>REM -> BF.BootStrap.Prepare_INIT 

d:\Projects\batch_framework>SET /A __RETURN_SUCCESS=0 

d:\Projects\batch_framework>SET /A __RETURN_UNKNOWN=1 

d:\Projects\batch_framework>SET /A __RETURN=1 

d:\Projects\batch_framework>REM -> BF.BootStrap.Prepare_BEGIN 

d:\Projects\batch_framework>SET BF_Start=#":<NUL ( SETLOCAL EnableDelayedExpansion#"#"& CALL SET "BF.System.CmdLine=%CMDCMDLINE%"#"#"& CALL SET "BF.Param[0]=%~f0"#"#"& CALL SET "BF.Param.String=%*")#"#"& "d:\Projects\batch_framework\BF_BootStrap.bat" /INTERNAL_START#"#"& FOR /F "UseBackQ Tokens=1,* Delims==" %i IN (`SET BF`) DO SET "%i="#" 

d:\Projects\batch_framework>SET /A __RETURN=0 

d:\Projects\batch_framework>REM <- BF.BootStrap.Prepare 

d:\Projects\batch_framework>(
ENDLOCAL 
 SET "BF_Start=:<NUL ( SETLOCAL EnableDelayedExpansion& CALL SET "BF.System.CmdLine=%CMDCMDLINE%"& CALL SET "BF.Param[0]=%~f0"& CALL SET "BF.Param.String=%*")& "d:\Projects\batch_framework\BF_BootStrap.bat" /INTERNAL_START& FOR /F "UseBackQ Tokens=1,* Delims==" %i IN (`SET BF`) DO SET "%i=""  
 EXIT /B 0 
) 

d:\Projects\batch_framework>(SETLOCAL EnableDelayedExpansion  & CALL SET "BF.System.CmdLine=%CMDCMDLINE%"  & CALL SET "BF.Param[0]=%~f0"  & CALL SET "BF.Param.String=%*" ) 0<NUL  & "d:\Projects\batch_framework\BF_BootStrap.bat" /INTERNAL_START  & FOR /F "UseBackQ Tokens=1,* Delims==" %i IN (`SET BF`) DO SET "%i=" 

d:\Projects\batch_framework>REM -> BF.BootStrap 

d:\Projects\batch_framework>IF [/INTERNAL_START] EQU [/INTERNAL_START] (GOTO :BF.BootStrap.Main )  ELSE (GOTO :BF.BootStrap.Prepare ) 

d:\Projects\batch_framework>REM -> BF.BootStrap.Main 

d:\Projects\batch_framework>SETLOCAL EnableDelayedExpansion 

d:\Projects\batch_framework>SET /A __RETURN_SUCCESS=0 

d:\Projects\batch_framework>SET /A __RETURN_UNKNOWN=1 

d:\Projects\batch_framework>SET /A __RETURN_MISSED_PARAM=2 

d:\Projects\batch_framework>SET /A __RETURN=1 

d:\Projects\batch_framework>IF [d:\Projects\batch_framework\BF_Test.bat] EQU [] (
SET /A __RETURN=2  
 GOTO :BF.BootStrap.Main_RETURN 
) 

d:\Projects\batch_framework>SET "BF.Script.File=d:\Projects\batch_framework\BF_Test.bat" 

d:\Projects\batch_framework>FOR %i in ("d:\Projects\batch_framework\BF_Test.bat") DO (
SET "BF.Script.Path=%~dpi"  
 SET "BF.Script.Name=%~ni"  
 SET "BF.Script.Ext=%~xi" 
) 

d:\Projects\batch_framework>(
SET "BF.Script.Path=d:\Projects\batch_framework\"  
 SET "BF.Script.Name=BF_Test"  
 SET "BF.Script.Ext=.bat" 
) 

d:\Projects\batch_framework>SET "BF.Tmp.Ext=.tmp" 

d:\Projects\batch_framework>SET "BF.Tmp.Name=BF_Test_BF" 

d:\Projects\batch_framework>SET "BF.Tmp.File=d:\Projects\batch_framework\BF_Test_BF.tmp" 

d:\Projects\batch_framework>SET "BF.Exec.File=d:\Projects\batch_framework\BF_Test_BF.bat" 

d:\Projects\batch_framework>SET /P ".=CALL :BF.BootStrap.Init & GOTO :%%BF_Start%%"   1>d:\Projects\batch_framework\BF_Test_BF.tmp 0<NUL 

d:\Projects\batch_framework>(
ECHO. 
 ECHO. 
 TYPE "d:\Projects\batch_framework\BF_Test.bat"  
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp 

d:\Projects\batch_framework>(
ECHO. 
 ECHO. 
 ECHO ::::::::::End of the original script file::::::::::  
 ECHO GOTO :eof  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp 

d:\Projects\batch_framework>FOR /F "UseBackQ Delims== Tokens=1,*" %i IN (`SET __`) DO ((
ECHO :: %i : %j  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: __RETURN : 1  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: __RETURN_MISSED_PARAM : 2  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: __RETURN_SUCCESS : 0  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: __RETURN_UNKNOWN : 1  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>FOR /F "UseBackQ Delims== Tokens=1,*" %i IN (`SET BF`) DO ((
ECHO :: %i : %j  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Exec.File : d:\Projects\batch_framework\BF_Test_BF.bat  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Param.String : -1 /2 "3" "4=2"  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Param[0] : d:\Projects\batch_framework\BF_Test.bat  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Script.Ext : .bat  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Script.File : d:\Projects\batch_framework\BF_Test.bat  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Script.Name : BF_Test  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Script.Path : d:\Projects\batch_framework\  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.System.CmdLine : "C:\Windows\System32\cmd.exe"   
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Tmp.Ext : .tmp  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Tmp.File : d:\Projects\batch_framework\BF_Test_BF.tmp  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF.Tmp.Name : BF_Test_BF  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>((
ECHO :: BF_Start : :<NUL ( SETLOCAL EnableDelayedExpansion& CALL SET "BF.System.CmdLine=%CMDCMDLINE%"& CALL SET "BF.Param[0]=%~f0"& CALL SET "BF.Param.String=%*")& "d:\Projects\batch_framework\BF_BootStrap.bat" /INTERNAL_START& FOR /F "UseBackQ Tokens=1,* Delims==" %i IN (`SET BF`) DO SET "%i="  
 ECHO.
) 1>>d:\Projects\batch_framework\BF_Test_BF.tmp ) 

d:\Projects\batch_framework>TYPE "d:\Projects\batch_framework\BF_BootStrap.bat"  1>>d:\Projects\batch_framework\BF_Test_BF.tmp 

d:\Projects\batch_framework>IF EXIST "d:\Projects\batch_framework\BF_Test_BF.bat" (DEL "d:\Projects\batch_framework\BF_Test_BF.bat"  1>NUL 2>NUL ) 

d:\Projects\batch_framework>REN "d:\Projects\batch_framework\BF_Test_BF.tmp" "BF_Test_BF.bat" 

d:\Projects\batch_framework>CALL d:\Projects\batch_framework\BF_Test_BF.bat 

d:\Projects\batch_framework>CALL :BF.BootStrap.Init   & GOTO :%BF_Start% 

d:\Projects\batch_framework>REM -> BF.BootStrap.Init 

d:\Projects\batch_framework>FOR %P IN (-1 /2 "3" "4=2") DO (
REM TODO Parse input params  
 ECHO %P 
) 

d:\Projects\batch_framework>(
REM TODO Parse input params  
 ECHO -1 
) 
-1

d:\Projects\batch_framework>(
REM TODO Parse input params  
 ECHO /2 
) 
/2

d:\Projects\batch_framework>(
REM TODO Parse input params  
 ECHO "3" 
) 
"3"

d:\Projects\batch_framework>(
REM TODO Parse input params  
 ECHO "4=2" 
) 
"4=2"

d:\Projects\batch_framework>REM <- BF.BootStrap.Init 

d:\Projects\batch_framework>GOTO :eof 

d:\Projects\batch_framework>REM -> %BF_Start% 

d:\Projects\batch_framework>CALL :BF.BootStrap.Include "BF_DateTime.bat" 

d:\Projects\batch_framework>REM -> BF.BootStrap.Include 

d:\Projects\batch_framework>SETLOCAL EnableDelayedExpansion 

d:\Projects\batch_framework>SET /A __RETURN_SUCCESS=0 

d:\Projects\batch_framework>SET /A __RETURN_UNKNOWN=1 

d:\Projects\batch_framework>SET /A __RETURN_MISSED_PARAM=2 

d:\Projects\batch_framework>SET /A __RETURN_FILE_NOT_FOUND=3 

d:\Projects\batch_framework>SET /A __RETURN=1 

d:\Projects\batch_framework>SET "__Include.File=BF_DateTime.bat" 

d:\Projects\batch_framework>IF [BF_DateTime.bat] EQU [] (
SET /A __RETURN=2  
 GOTO :BF.BootStrap.Include_RETURN 
) 

d:\Projects\batch_framework>SET "__Include.Function.Init=BF_DateTime.Init" 

d:\Projects\batch_framework>SET "__Include.Function.Init=!__Include.Function.Init:_=.!" 

d:\Projects\batch_framework>IF NOT EXIST "BF_DateTime.bat" (
SET /A __RETURN=3  
 GOTO :BF.BootStrap.Include_RETURN 
) 

d:\Projects\batch_framework>TYPE "BF_DateTime.bat"  1>>"d:\Projects\batch_framework\BF_Test_BF.bat" 

d:\Projects\batch_framework>SET /A __RETURN=0 

d:\Projects\batch_framework>REM <- BF.BootStrap.Include 

d:\Projects\batch_framework>(
ENDLOCAL 
 IF NOT [0] EQU [3] (
CALL :BF.DateTime.Init  
 SET __RETURN=0 
)  
 EXIT /B 0 
) 

d:\Projects\batch_framework>Echo Its ME! DATE TIME 
Its ME DATE TIME

d:\Projects\batch_framework>GOTO :EOF 

d:\Projects\batch_framework>CALL :CALL 

d:\Projects\batch_framework>ECHO We testing call wrapper 
We testing call wrapper

d:\Projects\batch_framework>EXIT /B 0 

d:\Projects\batch_framework>REM -> BF_Test.Main 

d:\Projects\batch_framework>ECHO Hello BF! 
Hello BF

d:\Projects\batch_framework>ECHO Hello BF! 
Hello BF

d:\Projects\batch_framework>REM <- BF_Test.Main 

d:\Projects\batch_framework>EXIT /B 

d:\Projects\batch_framework>CALL :BF.BootStrap.ClearLocal 

d:\Projects\batch_framework>SET /A __=0 

d:\Projects\batch_framework>FOR /F "UseBackQ Tokens=1,* Delims==" %i IN (`SET __`) DO SET "%i=" 

d:\Projects\batch_framework>SET "__=" 

d:\Projects\batch_framework>SET "__RETURN=" 

d:\Projects\batch_framework>SET "__RETURN_MISSED_PARAM=" 

d:\Projects\batch_framework>SET "__RETURN_SUCCESS=" 

d:\Projects\batch_framework>SET "__RETURN_UNKNOWN=" 

d:\Projects\batch_framework>EXIT /B 0 

d:\Projects\batch_framework>SET /A __RETURN=0 

d:\Projects\batch_framework>REM <- BF.BootStrap.Main 

d:\Projects\batch_framework>(
ENDLOCAL 
 EXIT /B 0 
) 

d:\Projects\batch_framework>SET "BF_Start=" 
